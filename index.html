<!DOCTYPE html>
<html>
<head>
  <title>AI Onboarding</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial;
      background:#f4f6f8;
      padding:20px;
    }
    .card {
      max-width: 560px;
      margin:auto;
      background:#fff;
      padding:25px;
      border-radius:10px;
      box-shadow:0 4px 10px rgba(0,0,0,0.1);
    }
    input, button {
      width:100%;
      padding:12px;
      margin-top:10px;
      font-size:16px;
    }
    button {
      background:#007bff;
      color:#fff;
      border:none;
      border-radius:6px;
      cursor:pointer;
    }
    button:disabled {
      background:#999;
    }
    #aiText {
      margin-top:15px;
      font-style:italic;
    }
  </style>
</head>

<body>

<div class="card">

  <div id="formSection">
    <h2>Welcome to USDC</h2>

    <input id="nameInput" placeholder="Your Name">
    <input id="emailInput" placeholder="Email ID">
    <input id="roleInput" placeholder="Role / Department">

    <button id="startBtn" onclick="startOnboarding()">Start Onboarding</button>
    <p id="status"></p>
  </div>

  <div id="aiSection" style="display:none;">
    <h3>AI Onboarding Session</h3>
    <p id="aiText">Connectingâ€¦</p>
  </div>

</div>

<script>
/* ðŸ”´ PASTE YOUR DEPLOYED WEB APP URL HERE */
const BACKEND_URL = "https://script.google.com/macros/s/AKfycbzY0CuQFdIBOopTEKOlWyjKlCIJ5N0v4ifoZiU_wpaKUOcuFgY5oUO0WvXy5L0FuQbP6A/exec";

let step = 0;
let recognition;

/* ================== POLICIES ================== */
const onboardingSteps = [
  "USDC welcomes you. You are looking at the future of education.",
  "United Skills Development Corporation is an ed-tech platform enabling universities to digitally educate learners globally.",
  "Our vision is to bridge the skill gap and make education innovative, interactive, and accessible.",
  "Our mission is to empower institutions during the fourth industrial revolution using advanced technologies.",
  "USDC operates in over 52 countries with more than seventy thousand learners and seven hundred employees.",
  "Our workplace culture promotes innovation, diversity, collaboration, transparency, and employee well-being.",
  "Office attendance is five days a week with flexible shifts based on business requirements.",
  "Leave policies include maternity, paternity, earned, sick, marriage, and bereavement leaves.",
  "Employee benefits include insurance coverage, EPF, gratuity, wellness programs, and learning assistance.",
  "Employees must complete LinkedIn certification within one month and post using hashtag USDC.",
  "Probation period ranges from three to six months with performance evaluation.",
  "All employees must comply with company policies, IT usage rules, and confidentiality agreements.",
  "For any queries, employees can contact HR or the respective support teams.",
  "This concludes your onboarding. Welcome to USDC and wish you success."
];

/* ================== START ================== */
function startOnboarding() {

  const name = document.getElementById("nameInput").value.trim();
  const email = document.getElementById("emailInput").value.trim();
  const role = document.getElementById("roleInput").value.trim();

  if (name === "" || email === "" || role === "") {
    alert("Please fill all details");
    return;
  }

  document.getElementById("startBtn").disabled = true;
  document.getElementById("status").innerText = "Starting onboardingâ€¦";

  fetch(BACKEND_URL, {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: `name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}&role=${encodeURIComponent(role)}`
  })
  .then(() => {
    document.getElementById("formSection").style.display = "none";
    document.getElementById("aiSection").style.display = "block";
    speak(`Hello ${name}. Welcome to USDC.`, true);
  })
  .catch(() => {
    alert("Backend connection failed");
    document.getElementById("startBtn").disabled = false;
  });
}

/* ================== SPEAK ================== */
function speak(text, listenAfter=false) {
  const u = new SpeechSynthesisUtterance(text);
  const voices = speechSynthesis.getVoices();
  u.voice = voices.find(v => v.lang === "en-IN") || voices[0];
  u.rate = 0.85;
  u.pitch = 1;
  u.volume = 1;

  document.getElementById("aiText").innerText = text;

  u.onend = () => {
    if (listenAfter) setTimeout(startListening, 1200);
  };

  speechSynthesis.speak(u);
}

/* ================== LISTEN ================== */
function startListening() {
  recognition = new webkitSpeechRecognition();
  recognition.lang = "en-IN";
  recognition.onstart = () => {
    document.getElementById("aiText").innerText = "Listeningâ€¦";
  };
  recognition.onresult = () => nextStep();
  recognition.onerror = () => nextStep();
  recognition.start();
}

/* ================== FLOW ================== */
function nextStep() {
  if (step < onboardingSteps.length) {
    speak(onboardingSteps[step], true);
    step++;
  } else {
    speak("Onboarding completed. Thank you.");
  }
}
</script>

</body>
</html>
